# í™˜ìœ¨ ì •ë³´ ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ

> **SCRUM-7**: ê²½ì œì§€í‘œ ê²Œì‹œíŒ êµ¬í˜„ (í™˜ìœ¨ ì •ë³´)
> **ì‘ì—… ê¸°ê°„**: 2025-11-26
> **ë‹´ë‹¹ì**: terryjin89

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì•„í‚¤í…ì²˜ ì„¤ê³„](#ì•„í‚¤í…ì²˜-ì„¤ê³„)
4. [êµ¬í˜„ í”„ë¡œì„¸ìŠ¤](#êµ¬í˜„-í”„ë¡œì„¸ìŠ¤)
5. [ì£¼ìš” êµ¬í˜„ ë‚´ìš©](#ì£¼ìš”-êµ¬í˜„-ë‚´ìš©)
6. [í…ŒìŠ¤íŠ¸ ì „ëµ](#í…ŒìŠ¤íŠ¸-ì „ëµ)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
8. [ì½”ë“œ ì°¸ì¡° ê°€ì´ë“œ](#ì½”ë“œ-ì°¸ì¡°-ê°€ì´ë“œ)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­
ì‚¬ìš©ìê°€ ì£¼ìš” í†µí™”ì˜ í™˜ìœ¨ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°íšŒí•˜ê³ , ê³¼ê±° í™˜ìœ¨ ì¶”ì´ë¥¼ ì°¨íŠ¸ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥
- âœ… **í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ**: ì£¼ìš” 10ê°œêµ­ í†µí™”ì˜ í™˜ìœ¨ ì •ë³´ (USD, JPY, EUR, CNH, GBP, CHF, CAD, AUD, HKD, SGD)
- âœ… **ì „ì¼ëŒ€ë¹„ í‘œì‹œ**: ì „ì¼ ëŒ€ë¹„ ë³€ë™ì•¡, ë³€ë™ë¥ , ë³€ë™ ë°©í–¥ (UP/DOWN/SAME)
- âœ… **í™˜ìœ¨ ì°¨íŠ¸**: ì„ íƒí•œ í†µí™”ì˜ ê³¼ê±° í™˜ìœ¨ ì¶”ì´ (7ì¼/30ì¼/90ì¼/1ë…„)
- âœ… **ë°˜ì‘í˜• UI**: sticky í—¤ë”, í˜¸ë²„ íš¨ê³¼, í™€ì§ í–‰ ìƒ‰ìƒ

### ì¸ìˆ˜ ì¡°ê±´ (Acceptance Criteria)
- [x] ê²½ì œì§€í‘œ í˜ì´ì§€ì—ì„œ ì£¼ìš” 10ê°œêµ­ í™˜ìœ¨ ì •ë³´ í‘œì‹œ
- [x] í•œêµ­ìˆ˜ì¶œì…ì€í–‰ APIë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë°ì´í„° ì¡°íšŒ
- [x] ì „ì¼ëŒ€ë¹„ ë³€ë™ ê³„ì‚° ë° ì‹œê°ì  í‘œì‹œ (â–²/â–¼/-)
- [x] í…Œì´ë¸” UI (sticky header, í™€ì§ ìƒ‰ìƒ, í˜¸ë²„ íš¨ê³¼)
- [x] í–‰ í´ë¦­ ì‹œ í™˜ìœ¨ ì°¨íŠ¸ í˜ì´ì§€ ì´ë™
- [x] ê¸°ê°„ë³„ ì°¨íŠ¸ í‘œì‹œ (7ì¼/30ì¼/90ì¼/1ë…„)

---

## ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| **React** | 19.2.0 | UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| **Vite** | 7.2.2 | ë¹Œë“œ ë„êµ¬ ë° ê°œë°œ ì„œë²„ |
| **Axios** | 1.13.2 | HTTP í´ë¼ì´ì–¸íŠ¸ (ë°±ì—”ë“œ API í˜¸ì¶œ) |
| **Recharts** | 3.4.1 | í™˜ìœ¨ ì°¨íŠ¸ ì‹œê°í™” |
| **Playwright** | latest | E2E í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ |

### ë°±ì—”ë“œ
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| **Spring Boot** | 3.2.0 | ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬ |
| **JDK** | 17 | Java ëŸ°íƒ€ì„ |
| **RestTemplate** | - | ì™¸ë¶€ API í˜¸ì¶œ |
| **Jackson** | - | JSON ì§ë ¬í™”/ì—­ì§ë ¬í™” |
| **Lombok** | - | ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ ì œê±° |
| **Swagger** | 3.x | API ë¬¸ì„œí™” |

### ì¸í”„ë¼
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Docker** | ì»¨í…Œì´ë„ˆí™” |
| **Docker Compose** | ë©€í‹° ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| **MySQL** | ë°ì´í„°ë² ì´ìŠ¤ (í–¥í›„ í™˜ìœ¨ ë°ì´í„° ìºì‹±ìš©) |

### ì™¸ë¶€ API
| API | ìš©ë„ | ì¸ì¦ |
|-----|------|------|
| **í•œêµ­ìˆ˜ì¶œì…ì€í–‰ í™˜ìœ¨ API** | í™˜ìœ¨ ì •ë³´ ì¡°íšŒ | API Key |

---

## ì•„í‚¤í…ì²˜ ì„¤ê³„

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  í”„ë¡ íŠ¸ì—”ë“œ (React + Vite)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  App.jsx                                             â”‚  â”‚
â”‚  â”‚    â”œâ”€ ExchangeRateTable.jsx (í™˜ìœ¨ í…Œì´ë¸”)            â”‚  â”‚
â”‚  â”‚    â””â”€ RateDetailChart.jsx (í™˜ìœ¨ ì°¨íŠ¸)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                               â”‚
â”‚                              â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  economyService.js (API í˜¸ì¶œ ë¡œì§)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    HTTP (Vite Proxy)
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ë°±ì—”ë“œ (Spring Boot)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ExchangeRateController.java                         â”‚  â”‚
â”‚  â”‚    â”œâ”€ GET /api/exchange-rates                        â”‚  â”‚
â”‚  â”‚    â”œâ”€ GET /api/exchange-rates/{curUnit}              â”‚  â”‚
â”‚  â”‚    â””â”€ GET /api/exchange-rates/{curUnit}/historical   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                               â”‚
â”‚                              â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ExchangeRateService.java (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)             â”‚  â”‚
â”‚  â”‚    â”œâ”€ í™˜ìœ¨ ë°ì´í„° ì¡°íšŒ                                â”‚  â”‚
â”‚  â”‚    â”œâ”€ ì „ì¼ëŒ€ë¹„ ê³„ì‚°                                   â”‚  â”‚
â”‚  â”‚    â””â”€ ì£¼ìš” 10ê°œêµ­ í†µí™” í•„í„°ë§                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    HTTP (RestTemplate)
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            í•œêµ­ìˆ˜ì¶œì…ì€í–‰ í™˜ìœ¨ API (ì™¸ë¶€ API)                 â”‚
â”‚  https://oapi.koreaexim.go.kr/site/program/financial/...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° í”Œë¡œìš°

#### 1. í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ
```
ì‚¬ìš©ì
  â””â”€> ExchangeRateTable ì»´í¬ë„ŒíŠ¸ ë¡œë“œ
      â””â”€> economyService.getExchangeRates(searchDate)
          â””â”€> Vite Proxy (/api/exchange-rates)
              â””â”€> ExchangeRateController.getExchangeRates()
                  â””â”€> ExchangeRateService.getExchangeRates()
                      â”œâ”€> í•œêµ­ìˆ˜ì¶œì…ì€í–‰ API (í˜„ì¬ ë‚ ì§œ)
                      â”œâ”€> í•œêµ­ìˆ˜ì¶œì…ì€í–‰ API (ì „ì¼ ë‚ ì§œ)
                      â”œâ”€> ì „ì¼ëŒ€ë¹„ ê³„ì‚°
                      â””â”€> ì£¼ìš” 10ê°œêµ­ í†µí™” í•„í„°ë§
                          â””â”€> ExchangeRateDTO[] ë°˜í™˜
                              â””â”€> í”„ë¡ íŠ¸ì—”ë“œ ë Œë”ë§
```

#### 2. í™˜ìœ¨ ì°¨íŠ¸ ì¡°íšŒ
```
ì‚¬ìš©ì
  â””â”€> í…Œì´ë¸” í–‰ í´ë¦­ (ì˜ˆ: USD)
      â””â”€> RateDetailChart ì»´í¬ë„ŒíŠ¸ ë¡œë“œ
          â””â”€> economyService.getHistoricalRates(currencyCode, days)
              â””â”€> Vite Proxy (/api/exchange-rates/USD/historical?days=30)
                  â””â”€> ExchangeRateController.getHistoricalRates()
                      â””â”€> ExchangeRateService.getHistoricalRates()
                          â””â”€> ê³¼ê±° Nì¼ê°„ í•œêµ­ìˆ˜ì¶œì…ì€í–‰ API í˜¸ì¶œ
                              â””â”€> HistoricalRateDTO[] ë°˜í™˜
                                  â””â”€> Recharts LineChart ë Œë”ë§
```

---

## êµ¬í˜„ í”„ë¡œì„¸ìŠ¤

### Phase 1: ë°±ì—”ë“œ API ê°œë°œ (SCRUM-20, SCRUM-21)

#### 1.1 DTO ì„¤ê³„
**íŒŒì¼ ìœ„ì¹˜**: `backend/src/main/java/com/project/companyanalyzer/dto/`

**ExchangeRateResponse.java** (í•œêµ­ìˆ˜ì¶œì…ì€í–‰ API ì‘ë‹µ ë§¤í•‘)
```java
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class ExchangeRateResponse {
    @JsonProperty("cur_unit")    // í†µí™”ì½”ë“œ (USD, JPY ë“±)
    private String curUnit;

    @JsonProperty("cur_nm")       // í†µí™”ëª… (ë¯¸êµ­ ë‹¬ëŸ¬, ì¼ë³¸ ì˜Œ ë“±)
    private String curNm;

    @JsonProperty("deal_bas_r")   // ë§¤ë§¤ ê¸°ì¤€ìœ¨
    private String dealBasR;

    @JsonProperty("ttb")           // ì „ì‹ í™˜ ë°›ì„ë•Œ
    private String ttb;

    @JsonProperty("tts")           // ì „ì‹ í™˜ ë³´ë‚¼ë•Œ
    private String tts;
}
```

**ExchangeRateDTO.java** (í”„ë¡ íŠ¸ì—”ë“œ ì‘ë‹µ DTO)
```java
@Data
@Builder
public class ExchangeRateDTO {
    private String curUnit;           // í†µí™”ì½”ë“œ
    private String curNm;             // í†µí™”ëª…
    private BigDecimal dealBasR;      // ë§¤ë§¤ ê¸°ì¤€ìœ¨
    private BigDecimal ttb;           // ì „ì‹ í™˜ ë°›ì„ë•Œ
    private BigDecimal tts;           // ì „ì‹ í™˜ ë³´ë‚¼ë•Œ
    private BigDecimal changeAmount;  // ì „ì¼ëŒ€ë¹„ ë³€ë™ì•¡
    private BigDecimal changeRate;    // ì „ì¼ëŒ€ë¹„ ë³€ë™ë¥  (%)
    private String changeDirection;   // ë³€ë™ ë°©í–¥ (UP/DOWN/SAME)
    private String searchDate;        // ì¡°íšŒ ë‚ ì§œ
}
```

**HistoricalRateDTO.java** (ì°¨íŠ¸ ë°ì´í„° DTO)
```java
@Data
@Builder
public class HistoricalRateDTO {
    private String date;         // ë‚ ì§œ (YYYY-MM-DD)
    private BigDecimal rate;     // í™˜ìœ¨
}
```

#### 1.2 Service ê³„ì¸µ êµ¬í˜„
**íŒŒì¼ ìœ„ì¹˜**: `backend/src/main/java/com/project/companyanalyzer/service/ExchangeRateService.java`

**í•µì‹¬ ë¡œì§**:
1. **í™˜ìœ¨ ë°ì´í„° ì¡°íšŒ**
   - í•œêµ­ìˆ˜ì¶œì…ì€í–‰ API í˜¸ì¶œ
   - Mock ëª¨ë“œ ì§€ì› (ê°œë°œ í™˜ê²½)

2. **ì „ì¼ëŒ€ë¹„ ê³„ì‚°**
   ```java
   // ë³€ë™ì•¡ = í˜„ì¬ í™˜ìœ¨ - ì „ì¼ í™˜ìœ¨
   changeAmount = currentDealBasR.subtract(previousDealBasR);

   // ë³€ë™ë¥  = (ë³€ë™ì•¡ / ì „ì¼ í™˜ìœ¨) * 100
   changeRate = changeAmount
       .divide(previousDealBasR, 4, RoundingMode.HALF_UP)
       .multiply(BigDecimal.valueOf(100))
       .setScale(2, RoundingMode.HALF_UP);

   // ë³€ë™ ë°©í–¥
   if (changeAmount > 0) â†’ "UP"
   if (changeAmount < 0) â†’ "DOWN"
   if (changeAmount = 0) â†’ "SAME"
   ```

3. **ì£¼ìš” 10ê°œêµ­ í†µí™” í•„í„°ë§**
   ```java
   private static final Set<String> MAJOR_CURRENCIES = Set.of(
       "USD", "JPY(100)", "EUR", "CNH", "GBP",
       "CHF", "CAD", "AUD", "HKD", "SGD"
   );
   ```

4. **ê³¼ê±° í™˜ìœ¨ ë°ì´í„° ì¡°íšŒ**
   - Nì¼ê°„ ë°˜ë³µ API í˜¸ì¶œ
   - ë°ì´í„° ëˆ„ë½ ì‹œ ê±´ë„ˆë›°ê¸°
   - ë‚ ì§œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬

#### 1.3 Controller ê³„ì¸µ êµ¬í˜„
**íŒŒì¼ ìœ„ì¹˜**: `backend/src/main/java/com/project/companyanalyzer/controller/ExchangeRateController.java`

**API ì—”ë“œí¬ì¸íŠ¸**:

| Method | Endpoint | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|--------|----------|------|----------|
| GET | `/api/exchange-rates` | í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ | `searchDate` (YYYYMMDD, ì„ íƒ) |
| GET | `/api/exchange-rates/{curUnit}` | íŠ¹ì • í†µí™” ì¡°íšŒ | `curUnit` (í†µí™”ì½”ë“œ) |
| GET | `/api/exchange-rates/{curUnit}/historical` | ê³¼ê±° í™˜ìœ¨ ì¡°íšŒ | `days` (ê¸°ê°„, ê¸°ë³¸ê°’: 30) |

---

### Phase 2: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ (SCRUM-18, SCRUM-19)

#### 2.1 API ì„œë¹„ìŠ¤ êµ¬í˜„
**íŒŒì¼ ìœ„ì¹˜**: `frontend/src/services/economyService.js`

**ì£¼ìš” ê¸°ëŠ¥**:
```javascript
const economyService = {
  // í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ
  getExchangeRates: async (searchDate) => {
    const response = await economyAPI.get('', { params: { searchDate } });
    return response.data;
  },

  // ê³¼ê±° í™˜ìœ¨ ë°ì´í„° ì¡°íšŒ (ì°¨íŠ¸ìš©)
  getHistoricalRates: async (currencyCode, days = 30) => {
    const response = await economyAPI.get(`/${currencyCode}/historical`, {
      params: { days }
    });
    return response.data.map(item => ({
      ...item,
      rate: Number(item.rate)  // BigDecimal â†’ Number ë³€í™˜
    }));
  }
};
```

#### 2.2 í™˜ìœ¨ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸
**íŒŒì¼ ìœ„ì¹˜**: `frontend/src/components/ExchangeRateTable.jsx`

**ì£¼ìš” ê¸°ëŠ¥**:
- í™˜ìœ¨ ë°ì´í„° ë¡œë“œ ë° í‘œì‹œ
- ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼
- í–‰ í´ë¦­ ì´ë²¤íŠ¸ (ì°¨íŠ¸ í˜ì´ì§€ ì´ë™)
- ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬

**í•µì‹¬ ë¡œì§**:
```javascript
// ì–´ì œ ë‚ ì§œ ê³„ì‚° (í•œêµ­ìˆ˜ì¶œì…ì€í–‰ APIëŠ” ë‹¹ì¼ ë°ì´í„° ë¯¸ì œê³µ)
const yesterday = new Date();
yesterday.setDate(yesterday.getDate() - 1);
const searchDate = yesterday.toISOString().slice(0, 10).replace(/-/g, '');

// í™˜ìœ¨ ë°ì´í„° ë¡œë“œ
const data = await economyService.getExchangeRates(searchDate);
setExchangeRates(data);
```

**UI íŠ¹ì§•**:
- Sticky í—¤ë” (`position: sticky`)
- í™€ì§ í–‰ ìƒ‰ìƒ êµ¬ë¶„
- í˜¸ë²„ íš¨ê³¼
- ë°˜ì‘í˜• ë””ìì¸

#### 2.3 í™˜ìœ¨ ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
**íŒŒì¼ ìœ„ì¹˜**: `frontend/src/components/RateDetailChart.jsx`

**ì£¼ìš” ê¸°ëŠ¥**:
- Recharts LineChartë¥¼ ì‚¬ìš©í•œ í™˜ìœ¨ ì¶”ì´ ì‹œê°í™”
- ê¸°ê°„ ì„ íƒ (7ì¼/30ì¼/90ì¼/1ë…„)
- í†µê³„ ì •ë³´ ì¹´ë“œ (ìµœê³ ê°€/ìµœì €ê°€/í‰ê· ê°€)
- ì»¤ìŠ¤í…€ íˆ´íŒ

**í•µì‹¬ ë¡œì§**:
```javascript
// ê³¼ê±° í™˜ìœ¨ ë°ì´í„° ë¡œë“œ
const data = await economyService.getHistoricalRates(currencyCode, period);
setChartData(data);

// í†µê³„ ê³„ì‚°
const rates = data.map((item) => parseFloat(item.rate));
setStatistics({
  highest: Math.max(...rates).toFixed(2),
  lowest: Math.min(...rates).toFixed(2),
  average: (rates.reduce((a, b) => a + b, 0) / rates.length).toFixed(2),
});
```

**ì°¨íŠ¸ ì„¤ì •**:
```jsx
<LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>
  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
  <XAxis dataKey="date" angle={-45} textAnchor="end" />
  <YAxis
    tickFormatter={(value) => value.toLocaleString('ko-KR')}
    domain={[(dataMin) => Math.floor(dataMin * 0.99),
             (dataMax) => Math.ceil(dataMax * 1.01)]}
  />
  <Tooltip content={<CustomTooltip />} />
  <Line
    type="monotone"
    dataKey="rate"
    stroke="#1890ff"
    strokeWidth={2}
  />
</LineChart>
```

---

### Phase 3: Docker í™˜ê²½ ì„¤ì •

#### 3.1 Vite í”„ë¡ì‹œ ì„¤ì •
**íŒŒì¼ ìœ„ì¹˜**: `frontend/vite.config.js`

**ë¬¸ì œ**: Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œëŠ” `localhost`ë¡œ ë°±ì—”ë“œ ì ‘ê·¼ ë¶ˆê°€

**í•´ê²° ë°©ë²•**: í™˜ê²½ë³€ìˆ˜ë¥¼ í†µí•œ ë™ì  í”„ë¡ì‹œ ì„¤ì •
```javascript
export default defineConfig({
  plugins: [react()],
  server: {
    host: true,  // Docker ì™¸ë¶€ ì ‘ê·¼ í—ˆìš©
    watch: {
      usePolling: true,  // Docker HMR í™œì„±í™”
    },
    proxy: {
      '/api': {
        // í™˜ê²½ë³€ìˆ˜ë¡œ í”„ë¡ì‹œ íƒ€ê²Ÿ ì„¤ì •
        target: process.env.VITE_PROXY_TARGET || 'http://backend:8080',
        changeOrigin: true,
        secure: false,
      },
    },
  },
})
```

#### 3.2 Docker Compose ì„¤ì •
**íŒŒì¼ ìœ„ì¹˜**: `docker-compose.yml`

```yaml
services:
  frontend:
    environment:
      # Docker í™˜ê²½ì—ì„œ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ëª… ì‚¬ìš©
      VITE_PROXY_TARGET: http://backend:8080
    ports:
      - "5173:5173"
    depends_on:
      - backend
    networks:
      - app-network
```

---

### Phase 4: E2E í…ŒìŠ¤íŠ¸ êµ¬í˜„

#### 4.1 Playwright í…ŒìŠ¤íŠ¸ ì‘ì„±
**íŒŒì¼ ìœ„ì¹˜**: `tests/exchange-rate.spec.js`

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:

1. **í™˜ìœ¨ ì •ë³´ ëª©ë¡ì´ í‘œì‹œë˜ì–´ì•¼ í•¨**
   - í™˜ìœ¨ í…Œì´ë¸” ë Œë”ë§ í™•ì¸
   - í…Œì´ë¸” í—¤ë” ê²€ì¦
   ```javascript
   await expect(page.locator('.exchange-rate-container')).toBeVisible();
   await expect(page.locator('.table-title')).toHaveText('í™˜ìœ¨ ì •ë³´');
   ```

2. **ë°±ì—”ë“œ APIì—ì„œ í™˜ìœ¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨**
   - API ì‘ë‹µ ê°ì§€
   - ë°ì´í„° í•„ë“œ ê²€ì¦
   ```javascript
   const responsePromise = page.waitForResponse(
     response => response.url().includes('/api/exchange-rates')
   );
   const data = await response.json();
   expect(data).toBeInstanceOf(Array);
   expect(firstItem).toHaveProperty('curUnit');
   ```

3. **ì „ì¼ëŒ€ë¹„ ë³€ë™ì´ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ì–´ì•¼ í•¨**
   - ì „ì¼ëŒ€ë¹„ ì»¬ëŸ¼ í™•ì¸
   - ë³€ë™ ì•„ì´ì½˜ ê²€ì¦ (â–²/â–¼/-)

4. **ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì´ ì‘ë™í•´ì•¼ í•¨**
   - ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
   - API ì¬í˜¸ì¶œ í™•ì¸

5. **ë¡œë”© ìƒíƒœê°€ í‘œì‹œë˜ì–´ì•¼ í•¨**
   - ë¡œë”© ë©”ì‹œì§€ í™•ì¸
   - ë¡œë”© ì™„ë£Œ í›„ í…Œì´ë¸” í‘œì‹œ

6. **ì—ëŸ¬ ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨**
   - API ì‹¤íŒ¨ ì‹œë®¬ë ˆì´ì…˜
   - ì—ëŸ¬ ë©”ì‹œì§€ ë° "ë‹¤ì‹œ ì‹œë„" ë²„íŠ¼ í™•ì¸

**í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼**:
```
âœ“ í™˜ìœ¨ ì •ë³´ ëª©ë¡ì´ í‘œì‹œë˜ì–´ì•¼ í•¨ (1.2s)
âœ“ ë°±ì—”ë“œ APIì—ì„œ í™˜ìœ¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨ (564ms)
âœ“ ì „ì¼ëŒ€ë¹„ ë³€ë™ì´ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ì–´ì•¼ í•¨ (1.1s)
âœ“ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì´ ì‘ë™í•´ì•¼ í•¨ (1.3s)
âœ“ ë¡œë”© ìƒíƒœê°€ í‘œì‹œë˜ì–´ì•¼ í•¨ (770ms)
âœ“ ì—ëŸ¬ ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨ (1.2s)

6 passed (7.5s)
```

---

## ì£¼ìš” êµ¬í˜„ ë‚´ìš©

### 1. ì „ì¼ëŒ€ë¹„ ê³„ì‚° ë¡œì§

**ë°±ì—”ë“œ êµ¬í˜„** (`ExchangeRateService.java:175-211`):
```java
private ExchangeRateDTO convertToDTO(
    ExchangeRateResponse currentRate,
    ExchangeRateResponse previousRate,
    String searchDate
) {
    // í˜„ì¬ ë§¤ë§¤ ê¸°ì¤€ìœ¨ íŒŒì‹±
    BigDecimal currentDealBasR = parseBigDecimal(currentRate.getDealBasR());

    // ì „ì¼ëŒ€ë¹„ ê³„ì‚°
    BigDecimal changeAmount = BigDecimal.ZERO;
    BigDecimal changeRate = BigDecimal.ZERO;
    String changeDirection = "SAME";

    if (previousRate != null) {
        BigDecimal previousDealBasR = parseBigDecimal(previousRate.getDealBasR());

        // ë³€ë™ì•¡ = í˜„ì¬ - ì „ì¼
        changeAmount = currentDealBasR.subtract(previousDealBasR);

        // ë³€ë™ë¥  = (ë³€ë™ì•¡ / ì „ì¼) * 100
        if (previousDealBasR.compareTo(BigDecimal.ZERO) > 0) {
            changeRate = changeAmount
                .divide(previousDealBasR, 4, RoundingMode.HALF_UP)
                .multiply(BigDecimal.valueOf(100))
                .setScale(2, RoundingMode.HALF_UP);
        }

        // ë°©í–¥ ê²°ì •
        int comparison = changeAmount.compareTo(BigDecimal.ZERO);
        if (comparison > 0) changeDirection = "UP";
        else if (comparison < 0) changeDirection = "DOWN";
    }

    return ExchangeRateDTO.builder()
        .curUnit(currentRate.getCurUnit())
        .curNm(currentRate.getCurNm())
        .dealBasR(currentDealBasR)
        .changeAmount(changeAmount)
        .changeRate(changeRate)
        .changeDirection(changeDirection)
        .build();
}
```

### 2. í™˜ìœ¨ ë°ì´í„° API í˜¸ì¶œ

**ì‹¤ì œ API ëª¨ë“œ** (`ExchangeRateService.java:132-145`):
```java
private List<ExchangeRateResponse> fetchFromApi(String searchDate) {
    log.debug("ì‹¤ì œ API í˜¸ì¶œ - ë‚ ì§œ: {}", searchDate);

    String url = String.format("%s?authkey=%s&searchdate=%s&data=AP01",
        apiUrl, authKey, searchDate);

    ExchangeRateResponse[] response = restTemplate.getForObject(
        url, ExchangeRateResponse[].class
    );

    if (response == null || response.length == 0) {
        throw new RuntimeException("API ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
    }

    return Arrays.asList(response);
}
```

**Mock ëª¨ë“œ** (`ExchangeRateService.java:150-170`):
```java
private List<ExchangeRateResponse> fetchMockData(String searchDate) throws IOException {
    log.debug("ëª©ì—… ë°ì´í„° ì¡°íšŒ - ë‚ ì§œ: {}", searchDate);

    String mockFilePath = String.format("exchange-rate-mock-%s.json", searchDate);

    try {
        ClassPathResource resource = new ClassPathResource(mockFilePath);
        return objectMapper.readValue(
            resource.getInputStream(),
            new TypeReference<List<ExchangeRateResponse>>() {}
        );
    } catch (IOException e) {
        // ê¸°ë³¸ ëª©ì—… íŒŒì¼ ì‚¬ìš©
        ClassPathResource defaultResource =
            new ClassPathResource("exchange-rate-mock.json");
        return objectMapper.readValue(
            defaultResource.getInputStream(),
            new TypeReference<List<ExchangeRateResponse>>() {}
        );
    }
}
```

### 3. ê³¼ê±° í™˜ìœ¨ ë°ì´í„° ì¡°íšŒ (ì°¨íŠ¸ìš©)

**ë°±ì—”ë“œ êµ¬í˜„** (`ExchangeRateService.java:255-291`):
```java
public List<HistoricalRateDTO> getHistoricalRates(String currencyCode, int days) {
    log.info("ê³¼ê±° í™˜ìœ¨ ì¡°íšŒ ì‹œì‘ - í†µí™”: {}, ê¸°ê°„: {}ì¼", currencyCode, days);

    List<HistoricalRateDTO> historicalRates = new ArrayList<>();
    LocalDate today = LocalDate.now();
    DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyyMMdd");
    DateTimeFormatter outputFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");

    // Nì¼ê°„ ë°˜ë³µ ì¡°íšŒ
    for (int i = 0; i < days; i++) {
        LocalDate targetDate = today.minusDays(i);
        String searchDate = targetDate.format(formatter);

        try {
            List<ExchangeRateResponse> dailyRates = fetchExchangeRates(searchDate);

            // íŠ¹ì • í†µí™” í•„í„°ë§
            dailyRates.stream()
                .filter(rate -> currencyCode.equals(rate.getCurUnit()))
                .findFirst()
                .ifPresent(rate -> {
                    BigDecimal dealBasR = parseBigDecimal(rate.getDealBasR());
                    if (dealBasR.compareTo(BigDecimal.ZERO) > 0) {
                        historicalRates.add(HistoricalRateDTO.builder()
                            .date(targetDate.format(outputFormatter))
                            .rate(dealBasR)
                            .build());
                    }
                });
        } catch (Exception e) {
            log.warn("ê³¼ê±° í™˜ìœ¨ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨ - ë‚ ì§œ: {}", searchDate);
            // ë°ì´í„° ëˆ„ë½ ì‹œ ê±´ë„ˆë›°ê¸°
        }
    }

    // ë‚ ì§œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
    historicalRates.sort(Comparator.comparing(HistoricalRateDTO::getDate));

    return historicalRates;
}
```

### 4. í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬

**í™˜ìœ¨ í…Œì´ë¸”** (`ExchangeRateTable.jsx:14-34`):
```javascript
const loadExchangeRates = async () => {
  setLoading(true);
  setError(null);

  try {
    // ì–´ì œ ë‚ ì§œ ê³„ì‚° (í•œêµ­ìˆ˜ì¶œì…ì€í–‰ APIëŠ” ë‹¹ì¼ ë°ì´í„° ë¯¸ì œê³µ)
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    const searchDate = yesterday.toISOString().slice(0, 10).replace(/-/g, '');

    const data = await economyService.getExchangeRates(searchDate);
    setExchangeRates(data);
    setLastUpdated(new Date());
  } catch (err) {
    console.error('Failed to load exchange rates:', err);
    setError('í™˜ìœ¨ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  } finally {
    setLoading(false);
  }
};
```

**í™˜ìœ¨ ì°¨íŠ¸** (`RateDetailChart.jsx:35-58`):
```javascript
const loadChartData = async (period) => {
  setLoading(true);
  setError(null);

  try {
    const data = await economyService.getHistoricalRates(currencyCode, period);
    setChartData(data);

    // í†µê³„ ê³„ì‚°
    if (data.length > 0) {
      const rates = data.map((item) => parseFloat(item.rate));
      setStatistics({
        highest: Math.max(...rates).toFixed(2),
        lowest: Math.min(...rates).toFixed(2),
        average: (rates.reduce((a, b) => a + b, 0) / rates.length).toFixed(2),
      });
    }
  } catch (err) {
    console.error('Failed to load chart data:', err);
    setError('ì°¨íŠ¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  } finally {
    setLoading(false);
  }
};
```

---

## í…ŒìŠ¤íŠ¸ ì „ëµ

### 1. ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸

**ìˆ˜ë™ í…ŒìŠ¤íŠ¸ (cURL)**:
```bash
# í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ
curl -X GET "http://localhost:8080/api/exchange-rates?searchDate=20251125"

# íŠ¹ì • í†µí™” ì¡°íšŒ
curl -X GET "http://localhost:8080/api/exchange-rates/USD"

# ê³¼ê±° í™˜ìœ¨ ì¡°íšŒ
curl -X GET "http://localhost:8080/api/exchange-rates/USD/historical?days=7"
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
[
  {
    "curUnit": "USD",
    "curNm": "ë¯¸êµ­ ë‹¬ëŸ¬",
    "dealBasR": 1473.50,
    "ttb": 1458.76,
    "tts": 1488.23,
    "changeAmount": 1.50,
    "changeRate": 0.10,
    "changeDirection": "UP",
    "searchDate": "20251125"
  }
]
```

### 2. í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸

**Docker í™˜ê²½**:
```bash
# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker logs company-analyzer-backend
docker logs company-analyzer-frontend

# í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì†
http://localhost:5173
```

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:
1. í™˜ìœ¨ í…Œì´ë¸” ë¡œë“œ í™•ì¸
2. 10ê°œ í†µí™” ë°ì´í„° í‘œì‹œ í™•ì¸
3. USD í–‰ í´ë¦­ â†’ ì°¨íŠ¸ í˜ì´ì§€ ì´ë™
4. ì°¨íŠ¸ ë°ì´í„° ë¡œë“œ í™•ì¸
5. ê¸°ê°„ ì„ íƒ ë²„íŠ¼ (7ì¼/30ì¼/90ì¼/1ë…„) ë™ì‘ í™•ì¸

### 3. E2E í…ŒìŠ¤íŠ¸ (Playwright)

**í…ŒìŠ¤íŠ¸ ì‹¤í–‰**:
```bash
cd tests
npx playwright test exchange-rate.spec.js --reporter=list
```

**í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**:
- âœ… UI ë Œë”ë§ (í…Œì´ë¸”, ì°¨íŠ¸)
- âœ… API í˜¸ì¶œ ë° ì‘ë‹µ ê²€ì¦
- âœ… ì‚¬ìš©ì ì¸í„°ë™ì…˜ (í´ë¦­, ìƒˆë¡œê³ ì¹¨)
- âœ… ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬
- âœ… ë°ì´í„° ë³€í™˜ ë° í‘œì‹œ

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: Docker í™˜ê²½ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ í†µì‹  ì‹¤íŒ¨

**ì¦ìƒ**:
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `/api/exchange-rates` í˜¸ì¶œ ì‹œ 500 ì—ëŸ¬
- ë¸Œë¼ìš°ì € ì½˜ì†”: `Failed to load resource: the server responded with a status of 500`

**ì›ì¸**:
Vite í”„ë¡ì‹œ ì„¤ì •ì´ `localhost:8080`ìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆì–´ Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ë°±ì—”ë“œ ì ‘ê·¼ ë¶ˆê°€

**í•´ê²°**:
`vite.config.js`ì—ì„œ í™˜ê²½ë³€ìˆ˜ë¥¼ í†µí•œ ë™ì  í”„ë¡ì‹œ ì„¤ì •
```javascript
proxy: {
  '/api': {
    target: process.env.VITE_PROXY_TARGET || 'http://backend:8080',
    changeOrigin: true,
    secure: false,
  },
}
```

`docker-compose.yml`ì— í™˜ê²½ë³€ìˆ˜ ì¶”ê°€
```yaml
frontend:
  environment:
    VITE_PROXY_TARGET: http://backend:8080
```

### ë¬¸ì œ 2: í™˜ìœ¨ ì°¨íŠ¸ ë Œë”ë§ ì‹¤íŒ¨

**ì¦ìƒ**:
- í…Œì´ë¸” í–‰ í´ë¦­ ì‹œ "ì°¨íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..." ìƒíƒœì—ì„œ ë©ˆì¶¤
- ì½˜ì†” ì—ëŸ¬: `Cannot read property 'curUnit' of undefined`

**ì›ì¸**:
`App.jsx`ì—ì„œ ë°±ì—”ë“œ API ì‘ë‹µ í•„ë“œëª…(camelCase)ê³¼ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ(snake_case) ë¶ˆì¼ì¹˜
```javascript
// ì˜ëª»ëœ ì½”ë“œ
<RateDetailChart
  currencyCode={selectedCurrency.cur_unit}  // âŒ undefined
  currencyName={selectedCurrency.cur_nm}     // âŒ undefined
/>
```

**í•´ê²°**:
í•„ë“œëª…ì„ camelCaseë¡œ í†µì¼
```javascript
// ìˆ˜ì •ëœ ì½”ë“œ
<RateDetailChart
  currencyCode={selectedCurrency.curUnit}  // âœ…
  currencyName={selectedCurrency.curNm}    // âœ…
/>
```

### ë¬¸ì œ 3: Playwright í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

**ì¦ìƒ**:
- í…ŒìŠ¤íŠ¸ 1 ì‹¤íŒ¨: `strict mode violation: locator resolved to 2 elements`
- í…ŒìŠ¤íŠ¸ 2 ì‹¤íŒ¨: `Expected pattern: /[â–²â–¼-]/ Received: "952.91"`

**ì›ì¸**:
1. í…ŒìŠ¤íŠ¸ ì„ íƒìê°€ ë„ˆë¬´ ê´‘ë²”ìœ„ (`th:has-text("í†µí™”")` â†’ 2ê°œ ìš”ì†Œ ë§¤ì¹­)
2. ì „ì¼ëŒ€ë¹„ ì»¬ëŸ¼ ì¸ë±ìŠ¤ ì˜¤ë¥˜ (2ë²ˆì§¸ ëŒ€ì‹  5ë²ˆì§¸)

**í•´ê²°**:
```javascript
// ë¬¸ì œ 1 í•´ê²°: ë” êµ¬ì²´ì ì¸ ì„ íƒì ì‚¬ìš©
await expect(page.locator('th:has-text("í†µí™”ì½”ë“œ")')).toBeVisible();
await expect(page.locator('th:has-text("ë§¤ë§¤ê¸°ì¤€ìœ¨")')).toBeVisible();

// ë¬¸ì œ 2 í•´ê²°: ì˜¬ë°”ë¥¸ ì»¬ëŸ¼ ì¸ë±ìŠ¤ ì‚¬ìš©
const changeCell = page.locator('tbody tr').first().locator('td').nth(5);
```

---

## ì½”ë“œ ì°¸ì¡° ê°€ì´ë“œ

### ë°±ì—”ë“œ ì½”ë“œ êµ¬ì¡°

```
backend/src/main/java/com/project/companyanalyzer/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ ExchangeRateController.java       # REST API ì—”ë“œí¬ì¸íŠ¸
â”‚       â”œâ”€â”€ getExchangeRates()            # GET /api/exchange-rates
â”‚       â”œâ”€â”€ getExchangeRate()             # GET /api/exchange-rates/{curUnit}
â”‚       â””â”€â”€ getHistoricalRates()          # GET /api/exchange-rates/{curUnit}/historical
â”‚
â”œâ”€â”€ service/
â”‚   â””â”€â”€ ExchangeRateService.java          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚       â”œâ”€â”€ getExchangeRates()            # í™˜ìœ¨ ì¡°íšŒ + ì „ì¼ëŒ€ë¹„ ê³„ì‚°
â”‚       â”œâ”€â”€ fetchExchangeRates()          # ì‹¤ì œ/ëª©ì—… API í˜¸ì¶œ
â”‚       â”œâ”€â”€ fetchFromApi()                # í•œêµ­ìˆ˜ì¶œì…ì€í–‰ API í˜¸ì¶œ
â”‚       â”œâ”€â”€ fetchMockData()               # ëª©ì—… ë°ì´í„° ë¡œë“œ
â”‚       â”œâ”€â”€ convertToDTO()                # Response â†’ DTO ë³€í™˜
â”‚       â”œâ”€â”€ parseBigDecimal()             # ë¬¸ìì—´ â†’ BigDecimal ë³€í™˜
â”‚       â”œâ”€â”€ calculatePreviousDate()       # ì „ì¼ ë‚ ì§œ ê³„ì‚°
â”‚       â””â”€â”€ getHistoricalRates()          # ê³¼ê±° í™˜ìœ¨ ì¡°íšŒ
â”‚
â””â”€â”€ dto/
    â”œâ”€â”€ ExchangeRateResponse.java        # ì™¸ë¶€ API ì‘ë‹µ DTO
    â”œâ”€â”€ ExchangeRateDTO.java              # í”„ë¡ íŠ¸ì—”ë“œ ì‘ë‹µ DTO
    â””â”€â”€ HistoricalRateDTO.java            # ì°¨íŠ¸ ë°ì´í„° DTO
```

### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ App.jsx                                # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ handleCurrencySelect()            # í†µí™” ì„ íƒ í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ ExchangeRateTable ë Œë”ë§
â”‚   â””â”€â”€ RateDetailChart ë Œë”ë§
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ExchangeRateTable.jsx             # í™˜ìœ¨ í…Œì´ë¸”
â”‚   â”‚   â”œâ”€â”€ loadExchangeRates()           # í™˜ìœ¨ ë°ì´í„° ë¡œë“œ
â”‚   â”‚   â”œâ”€â”€ handleRefresh()               # ìƒˆë¡œê³ ì¹¨ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ handleRowClick()              # í–‰ í´ë¦­ í•¸ë“¤ëŸ¬
â”‚   â”‚   â””â”€â”€ renderChangeIndicator()       # ì „ì¼ëŒ€ë¹„ ì•„ì´ì½˜ ë Œë”ë§
â”‚   â”‚
â”‚   â”œâ”€â”€ RateDetailChart.jsx               # í™˜ìœ¨ ì°¨íŠ¸
â”‚   â”‚   â”œâ”€â”€ loadChartData()               # ì°¨íŠ¸ ë°ì´í„° ë¡œë“œ
â”‚   â”‚   â”œâ”€â”€ handlePeriodChange()          # ê¸°ê°„ ì„ íƒ í•¸ë“¤ëŸ¬
â”‚   â”‚   â””â”€â”€ CustomTooltip                 # ì»¤ìŠ¤í…€ íˆ´íŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ ExchangeRateTable.css             # í…Œì´ë¸” ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ RateDetailChart.css               # ì°¨íŠ¸ ìŠ¤íƒ€ì¼
â”‚
â””â”€â”€ services/
    â””â”€â”€ economyService.js                  # API í˜¸ì¶œ ì„œë¹„ìŠ¤
        â”œâ”€â”€ getExchangeRates()            # í™˜ìœ¨ ëª©ë¡ ì¡°íšŒ
        â””â”€â”€ getHistoricalRates()          # ê³¼ê±° í™˜ìœ¨ ì¡°íšŒ
```

### í…ŒìŠ¤íŠ¸ ì½”ë“œ êµ¬ì¡°

```
tests/
â””â”€â”€ exchange-rate.spec.js                 # Playwright E2E í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ í™˜ìœ¨ ì •ë³´ ëª©ë¡ì´ í‘œì‹œë˜ì–´ì•¼ í•¨
    â”œâ”€â”€ ë°±ì—”ë“œ APIì—ì„œ í™˜ìœ¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨
    â”œâ”€â”€ ì „ì¼ëŒ€ë¹„ ë³€ë™ì´ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ì–´ì•¼ í•¨
    â”œâ”€â”€ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì´ ì‘ë™í•´ì•¼ í•¨
    â”œâ”€â”€ ë¡œë”© ìƒíƒœê°€ í‘œì‹œë˜ì–´ì•¼ í•¨
    â””â”€â”€ ì—ëŸ¬ ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨
```

### ì£¼ìš” íŒŒì¼ ìœ„ì¹˜

| íŒŒì¼ | ìœ„ì¹˜ | ìš©ë„ |
|------|------|------|
| ExchangeRateController.java | `backend/src/main/java/.../controller/` | REST API ì—”ë“œí¬ì¸íŠ¸ |
| ExchangeRateService.java | `backend/src/main/java/.../service/` | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| ExchangeRateDTO.java | `backend/src/main/java/.../dto/` | ì‘ë‹µ DTO |
| ExchangeRateTable.jsx | `frontend/src/components/` | í™˜ìœ¨ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸ |
| RateDetailChart.jsx | `frontend/src/components/` | í™˜ìœ¨ ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸ |
| economyService.js | `frontend/src/services/` | API í˜¸ì¶œ ì„œë¹„ìŠ¤ |
| vite.config.js | `frontend/` | Vite ì„¤ì • (í”„ë¡ì‹œ) |
| docker-compose.yml | í”„ë¡œì íŠ¸ ë£¨íŠ¸ | Docker ì„¤ì • |
| exchange-rate.spec.js | `tests/` | E2E í…ŒìŠ¤íŠ¸ |

---

## ë°°ìš´ ì  & ê°œì„  ë°©í–¥

### ë°°ìš´ ì 
1. **Docker í™˜ê²½ì—ì„œì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ **
   - ì»¨í…Œì´ë„ˆ ê°„ í†µì‹  ì‹œ `localhost` ëŒ€ì‹  ì„œë¹„ìŠ¤ëª… ì‚¬ìš©
   - í™˜ê²½ë³€ìˆ˜ë¥¼ í†µí•œ ë™ì  ì„¤ì •ì˜ ì¤‘ìš”ì„±

2. **í•„ë“œëª… ì¼ê´€ì„±**
   - ë°±ì—”ë“œ-í”„ë¡ íŠ¸ì—”ë“œ ê°„ í•„ë“œëª… í†µì¼ (camelCase)
   - DTO ì„¤ê³„ ì‹œ ëª…ëª… ê·œì¹™ ì‚¬ì „ í˜‘ì˜ í•„ìš”

3. **E2E í…ŒìŠ¤íŠ¸ì˜ ê°€ì¹˜**
   - í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ë²„ê·¸ ì¡°ê¸° ë°œê²¬
   - ì„ íƒì êµ¬ì²´ì„±ì˜ ì¤‘ìš”ì„±

4. **BigDecimal ì •ë°€ë„**
   - ê¸ˆìœµ ë°ì´í„°ëŠ” `double` ëŒ€ì‹  `BigDecimal` ì‚¬ìš©
   - ë°˜ì˜¬ë¦¼ ëª¨ë“œ ëª…ì‹œ (`RoundingMode.HALF_UP`)

### ê°œì„  ë°©í–¥
1. **ìºì‹± ì „ëµ**
   - Redisë¥¼ í™œìš©í•œ í™˜ìœ¨ ë°ì´í„° ìºì‹±
   - API í˜¸ì¶œ íšŸìˆ˜ ê°ì†Œ (ë¹„ìš© ì ˆê°)

2. **ì—ëŸ¬ í•¸ë“¤ë§**
   - ë” êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€
   - ì¬ì‹œë„ ë¡œì§ (Exponential Backoff)

3. **ì„±ëŠ¥ ìµœì í™”**
   - ê³¼ê±° í™˜ìœ¨ ì¡°íšŒ ì‹œ ë³‘ë ¬ ì²˜ë¦¬
   - í”„ë¡ íŠ¸ì—”ë“œ ë©”ëª¨ì´ì œì´ì…˜ (`useMemo`, `useCallback`)

4. **ì ‘ê·¼ì„±**
   - ARIA ë ˆì´ë¸” ì¶”ê°€
   - í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›

---

## ì°¸ê³  ìë£Œ

### API ë¬¸ì„œ
- [í•œêµ­ìˆ˜ì¶œì…ì€í–‰ í™˜ìœ¨ API](https://www.koreaexim.go.kr/ir/HPHKIR020M01)

### ê¸°ìˆ  ë¬¸ì„œ
- [React ê³µì‹ ë¬¸ì„œ](https://react.dev/)
- [Vite ê³µì‹ ë¬¸ì„œ](https://vitejs.dev/)
- [Recharts ê³µì‹ ë¬¸ì„œ](https://recharts.org/)
- [Playwright ê³µì‹ ë¬¸ì„œ](https://playwright.dev/)
- [Spring Boot ê³µì‹ ë¬¸ì„œ](https://spring.io/projects/spring-boot)

### í”„ë¡œì íŠ¸ ë¬¸ì„œ
- [CLAUDE.md](../CLAUDE.md) - í”„ë¡œì íŠ¸ ì „ì²´ ê°€ì´ë“œ
- [prd.md](../prd.md) - ì œí’ˆ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ

---

**ì‘ì„±ì¼**: 2025-11-26
**ì‘ì„±ì**: terryjin89
**ë²„ì „**: 1.0.0
